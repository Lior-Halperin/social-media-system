{"ast":null,"code":"var _s2 = $RefreshSig$();\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ApiService from \"src/Utils/ApiService\";\nimport { setCustomerAddresses, addCustomerAddress } from \"src/redux/features/customerAddresses/customerAddressesSlice\";\nimport useSocketIo from \"./useSocketIo\";\nimport config from \"src/Utils/Config\";\nimport SocketEvents from \"src/Models/SocketEvents\";\nfunction useCustomerAddresses() {\n  _s2();\n  var _s = $RefreshSig$();\n  // Hook into Redux store for dispatching actions\n  const dispatch = useDispatch();\n  // React Query's client for managing cache and executing side effects on mutation\n  const queryClient = useQueryClient();\n\n  // Select the customerAddresses slice from the Redux store\n  const customerAddresses = useSelector(state => state.customerAddresses.customersAddresses);\n\n  // Initialize the API service for customer addresses\n  const apiService = new ApiService(\"projectCustomerEndPoint\");\n\n  // Function to get customer addresses by ID from the API\n  const getCustomerAddressesById = async id => {\n    const data = await apiService.getById(id);\n    return data;\n  };\n\n  // React Query's useQuery hook to fetch customer addresses by ID.\n  // It fetches customer addresses from the server and updates the Redux store.\n  const useGetCustomerAddressesById = id => {\n    _s();\n    return useQuery({\n      queryKey: [\"customerAddresses\", id],\n      queryFn: async () => {\n        const data = await getCustomerAddressesById(id);\n        dispatch(setCustomerAddresses(data));\n        return data;\n      },\n      // Conditional Data Fetching: The enabled option in useQuery ensures that the query only runs when a valid project_id is provided.\n      // By setting a default value of -1 for the project_id, the query is disabled until a valid project is selected.\n      enabled: id !== -1 // Ensure the query is only enabled when an ID is valid\n    });\n  };\n  _s(useGetCustomerAddressesById, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n    return [useQuery];\n  });\n  const handleSocketData = newCustomerAddresses => {\n    dispatch(addCustomerAddress(newCustomerAddresses));\n    queryClient.invalidateQueries({\n      queryKey: [\"customerAddresses\"]\n    });\n  };\n  useSocketIo(config.baseURL, SocketEvents.AddedProjectsCustomers, handleSocketData);\n\n  // Return the customer addresses data and the query function from the hook\n  return {\n    customerAddresses,\n    useGetCustomerAddressesById\n  };\n}\n_s2(useCustomerAddresses, \"WEcMGrMp72E+0jHZ2LHji3ZV2hI=\", false, function () {\n  return [useDispatch, useQueryClient, useSelector, useSocketIo];\n});\nexport default useCustomerAddresses;","map":{"version":3,"names":["useQuery","useQueryClient","useDispatch","useSelector","ApiService","setCustomerAddresses","addCustomerAddress","useSocketIo","config","SocketEvents","useCustomerAddresses","_s2","_s","$RefreshSig$","dispatch","queryClient","customerAddresses","state","customersAddresses","apiService","getCustomerAddressesById","id","data","getById","useGetCustomerAddressesById","queryKey","queryFn","enabled","handleSocketData","newCustomerAddresses","invalidateQueries","baseURL","AddedProjectsCustomers"],"sources":["C:/Coding/Private_Projects/social-media-system/frontend/src/hooks/useCustomerAddresses.ts"],"sourcesContent":["import { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport IProjectCustomerDetailsModel from \"src/Models/ProjectCustomerDetailsModel\";\r\nimport ApiService from \"src/Utils/ApiService\";\r\nimport {\r\n  setCustomerAddresses,\r\n  addCustomerAddress,\r\n} from \"src/redux/features/customerAddresses/customerAddressesSlice\";\r\nimport { RootState } from \"src/redux/store\";\r\nimport useSocketIo from \"./useSocketIo\";\r\nimport config from \"src/Utils/Config\";\r\nimport SocketEvents from \"src/Models/SocketEvents\";\r\n\r\nfunction useCustomerAddresses() {\r\n  // Hook into Redux store for dispatching actions\r\n  const dispatch = useDispatch();\r\n  // React Query's client for managing cache and executing side effects on mutation\r\n  const queryClient = useQueryClient();\r\n\r\n  // Select the customerAddresses slice from the Redux store\r\n  const customerAddresses = useSelector(\r\n    (state: RootState) => state.customerAddresses.customersAddresses\r\n  );\r\n\r\n  // Initialize the API service for customer addresses\r\n  const apiService = new ApiService<IProjectCustomerDetailsModel[]>(\r\n    \"projectCustomerEndPoint\"\r\n  );\r\n\r\n  // Function to get customer addresses by ID from the API\r\n  const getCustomerAddressesById = async (\r\n    id: number\r\n  ): Promise<IProjectCustomerDetailsModel[]> => {\r\n    const data = await apiService.getById(id);\r\n    return data;\r\n  };\r\n\r\n  // React Query's useQuery hook to fetch customer addresses by ID.\r\n  // It fetches customer addresses from the server and updates the Redux store.\r\n  const useGetCustomerAddressesById = (id: number) => {\r\n    return useQuery({\r\n      queryKey: [\"customerAddresses\", id],\r\n      queryFn: async () => {\r\n        const data = await getCustomerAddressesById(id);\r\n        dispatch(setCustomerAddresses(data));\r\n        return data;\r\n      },\r\n      // Conditional Data Fetching: The enabled option in useQuery ensures that the query only runs when a valid project_id is provided.\r\n      // By setting a default value of -1 for the project_id, the query is disabled until a valid project is selected.\r\n      enabled: id !== -1, // Ensure the query is only enabled when an ID is valid\r\n    });\r\n  };\r\n\r\n  const handleSocketData = (\r\n    newCustomerAddresses: IProjectCustomerDetailsModel\r\n  ) => {\r\n    dispatch(addCustomerAddress(newCustomerAddresses));\r\n    queryClient.invalidateQueries({ queryKey: [\"customerAddresses\"] });\r\n  };\r\n\r\n  useSocketIo(\r\n    config.baseURL,\r\n    SocketEvents.AddedProjectsCustomers,\r\n    handleSocketData\r\n  );\r\n\r\n  // Return the customer addresses data and the query function from the hook\r\n  return {\r\n    customerAddresses,\r\n    useGetCustomerAddressesById,\r\n  };\r\n}\r\n\r\nexport default useCustomerAddresses;\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,cAAc,QAAQ,uBAAuB;AAChE,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AAEtD,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,SACEC,oBAAoB,EACpBC,kBAAkB,QACb,6DAA6D;AAEpE,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,MAAM,MAAM,kBAAkB;AACrC,OAAOC,YAAY,MAAM,yBAAyB;AAElD,SAASC,oBAAoBA,CAAA,EAAG;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC9B;EACA,MAAMC,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC9B;EACA,MAAMa,WAAW,GAAGd,cAAc,CAAC,CAAC;;EAEpC;EACA,MAAMe,iBAAiB,GAAGb,WAAW,CAClCc,KAAgB,IAAKA,KAAK,CAACD,iBAAiB,CAACE,kBAChD,CAAC;;EAED;EACA,MAAMC,UAAU,GAAG,IAAIf,UAAU,CAC/B,yBACF,CAAC;;EAED;EACA,MAAMgB,wBAAwB,GAAG,MAC/BC,EAAU,IACkC;IAC5C,MAAMC,IAAI,GAAG,MAAMH,UAAU,CAACI,OAAO,CAACF,EAAE,CAAC;IACzC,OAAOC,IAAI;EACb,CAAC;;EAED;EACA;EACA,MAAME,2BAA2B,GAAIH,EAAU,IAAK;IAAAT,EAAA;IAClD,OAAOZ,QAAQ,CAAC;MACdyB,QAAQ,EAAE,CAAC,mBAAmB,EAAEJ,EAAE,CAAC;MACnCK,OAAO,EAAE,MAAAA,CAAA,KAAY;QACnB,MAAMJ,IAAI,GAAG,MAAMF,wBAAwB,CAACC,EAAE,CAAC;QAC/CP,QAAQ,CAACT,oBAAoB,CAACiB,IAAI,CAAC,CAAC;QACpC,OAAOA,IAAI;MACb,CAAC;MACD;MACA;MACAK,OAAO,EAAEN,EAAE,KAAK,CAAC,CAAC,CAAE;IACtB,CAAC,CAAC;EACJ,CAAC;EAACT,EAAA,CAZIY,2BAA2B;IAAA,QACxBxB,QAAQ;EAAA;EAajB,MAAM4B,gBAAgB,GACpBC,oBAAkD,IAC/C;IACHf,QAAQ,CAACR,kBAAkB,CAACuB,oBAAoB,CAAC,CAAC;IAClDd,WAAW,CAACe,iBAAiB,CAAC;MAAEL,QAAQ,EAAE,CAAC,mBAAmB;IAAE,CAAC,CAAC;EACpE,CAAC;EAEDlB,WAAW,CACTC,MAAM,CAACuB,OAAO,EACdtB,YAAY,CAACuB,sBAAsB,EACnCJ,gBACF,CAAC;;EAED;EACA,OAAO;IACLZ,iBAAiB;IACjBQ;EACF,CAAC;AACH;AAACb,GAAA,CA1DQD,oBAAoB;EAAA,QAEVR,WAAW,EAERD,cAAc,EAGRE,WAAW,EAwCrCI,WAAW;AAAA;AAab,eAAeG,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}